<!DOCTYPE html>

<head>
    <meta charset="utf-8" />

    <style>
        body{
            background-color: rgb(5, 0, 10);
        }
                    /*pas besoin de commentaire ici*/
        #NB{
            font-size: 50px;
        }

        .txt{
            color: white;
        }

        .row{
            display: block;
        }
    </style>
    <script>
        function entierNat(float){      //fait appartenir float à N
            return  Math.round(Math.abs(float));
        }


        function round(/*float*/nb, /*unsigned int*/precision){//combien de chiffres après la virgule
            precision = entierNat(precision);

            dix = 10**precision;
            nb*= dix;
            nb = Math.round(nb);
            nb /= dix;

            return nb;
        }

        function aleatoire(/*float*/min, /*float*/max, /*unsigned int*/ precision) {
            let alea = Math.random()  * (max - min) + min;
           
            return round(alea, precision);
        }
    </script>
</head>

<body>
    <script>
        let page = document.createElement("output");
        document.body.appendChild(page);        //créer un élément texte et l'ajoute au body
        page.classList.add("txt");              //lui met la class "txt"
        page.setAttribute("id", "NB")
        page.textContent = aleatoire(-(10**3), 10**3, 0).toString();//ajoute un nb random au p
        var err = document.createElement("p")
        document.body.appendChild(err);

        function reload(min, max, accuracy){
            if (min<max) {
                nb = aleatoire(min, max, accuracy);
                console.log(nb + " généré entre " + min + " et " + max);
            }else{
                nb = aleatoire(-(10**3), 10**3, accuracy);
                console.warn("minimum supérieur ou égal au maximum, nombre calculé entre les valeurs de base.\n");
                console.log("Le nombre est: " + nb);
            }
          console.info("Affiché avec une précision de " + accuracy.toString());

            page.textContent = nb.toString();
            return nb;
        }

        function getInputs(){                                           //pont entre le HTMl et la fonction reload()
            var minHtml = document.getElementById("nb-min");
            var maxHtml = document.getElementById("nb-max");
            var decimal = document.getElementById("prec");
            let min, max, acc;
            if (maxHtml.value == "") {
                max = 10**3;    //je le met en string car je n'ai pas à mettre les parseInt dans des else
                console.warn("Valeur de maxHtml non spécifiée donc rapportée à 10^3.")
            }else{
                max = parseInt(maxHtml.value, 10); //on convertit les entées en nombres
            }
            if (minHtml.value == "") {
                min = max * -1;
                console.warn("Valeur de minHtml non spécifiée donc rapportée à l'inverse du maximum.\n soit: " + min.toString())
            }else{
                min= parseInt(minHtml.value, 10);
            }
            if (decimal.value == '') {
                acc = 0;
                console.warn("Valeur de decimal non spécifiée donc mise à 0 (nombre entier).");
            }else{
                acc = parseInt(decimal.value, 10);
                if(acc > 10){acc = 10;}
            }

            let r = reload(min, max, acc); //r pour return

            if(typeof(r) !="number"){             //si reload ne return pas un nombre alors...
                page.textContent = "Erreur, fonction 'reload()', please try again."
                console.error("fonction reload in getInputs().\n Returned '" + r.toString() + "' of type '" + typeof(r) + "'.")
            }
        }
        </script>

    <form method="POST">
        <label class="row txt"><input type="number" id="nb-min"> Valeur minimale</label>
        <label class="row txt"><input type="number" id="nb-max"> Valeur maximale</label>
        <label class="row txt"><input type="number" maxlength="2" placeholder="10 maximum" id="prec" /> Nombre de décimales</label>
        <button type="button" onclick="getInputs()">Avoir un nombre aléatoire</button>
    </form>
</body>